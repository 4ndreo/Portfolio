---
import * as Icons from './icons/index.astro';
import {stats} from '../lang/en';

const iconComponents: any = Icons;
---

<section class=''>
	<div class='container brandsCarousel'>
		<div class='d-flex carouselTrack'>
			{
				stats
					.find((stat) => stat.title === 'technologies')
					?.data.map((stat: any) => {
						const IconComponent = iconComponents[stat.icon]; // Get the component reference
						return (
							<div class='brandLogo' title={stat.name}>
								<IconComponent />
							</div>
						);
					})
			}
			<!--- IMPORTANT: The content below includes clones of the original logos, which are necessary to create a seamless infinite loop effect. --->
			{
				stats
					.find((stat) => stat.title === 'technologies')
					?.data.map((stat: any) => {
						const IconComponent = iconComponents[stat.icon]; // Get the component reference
						return (
							<div class='brandLogo' title={stat.name}>
								<IconComponent />
							</div>
						);
					})
			}
		</div>
	</div>
</section>

<style>
	:root {
		--off-white: #fafaf0;
		--light-gray: #9ca6a2;
	}

	@keyframes infiniteLoop {
		0% {
			transform: translate3d(-3%, 0, 0);
		}
		100% {
			transform: translate3d(-53.5%, 0, 0);
		}
	}

	section {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		/* background: var(--off-white); */
	}

	.brandsCarousel {
		max-width: 100%;
		max-height: 100px;
		margin: auto;
		/* overflow: hidden; */
		position: relative;
	}

	/* .brandsCarousel::before,
	.brandsCarousel::after {
		content: '';
		width: 100px;
		height: 100px;
		background: linear-gradient(
			to right,
			rgba(0, 0, 0, 1) 0%,
			rgba(250, 0, 0, 0) 100%
		);
		position: absolute;
		z-index: 2;
	} */

	.brandsCarousel::before {
		top: 0;
		left: 0;
	}

	.brandsCarousel::after {
		top: 0;
		right: 0;
		transform: rotateZ(180deg);
	}

	.carouselTrack {
		display: flex;
		gap: 5rem;
		width: calc(350px * 23);
		animation: infiniteLoop 50s linear infinite;
		animation-fill-mode: forwards;
		will-change: transform;
	}
	.carouselTrack:hover {
		animation-play-state: paused; 
	}

	.brandLogo {
		width: 100px;
		height: fit-content;
		align-items: center;
		margin: auto;
		overflow: hidden;
	}

	.brandLogo svg {
		width: 100px;
		height: 100px;
	}

	/*

NOTE: The content below includes copyright notice information;
      You may safely omit this content, as it is not essential to the functionality of the carousel.

*/

	:root {
		--dark-gray: #71797e;
		--heart-red: #a60311;
		--light-blue: #0096ff;
	}

	a {
		text-decoration: none;
		color: var(--light-blue);
		position: relative;
	}

	a::after {
		content: '';
		width: 0;
		height: 0.125rem;
		left: 0;
		bottom: 0;
		transition: width 0.4s ease;
		background: var(--light-blue);
		position: absolute;
	}

	a:hover::after {
		width: 100%;
	}
</style>
